{"version":3,"sources":["components/Send/index.js","components/Send/Send.js","components/Message/index.js","components/Message/Message.js","components/Chat/index.js","components/Chat/Chat.js","index.js"],"names":["Send","_ref","value","onChange","onSend","react_default","a","createElement","onSubmit","className","type","Message","item","user","text","Chat","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","setListeners","socket","io","on","emit","state","currentUser","data","isLogin","addMessage","console","log","changeMessage","event","setState","inputMsg","target","validName","inputName","div","current","messages","concat","toConsumableArray","name","message","sendMessage","preventDefault","_this$state","trim","length","React","createRef","users","_this$state2","map","key","components_Message","components_Send","ref","defaultValue","onClick","Component","ReactDOM","render","components_Chat","document","getElementById"],"mappings":"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","file":"static/js/main.552524a5.chunk.js","sourcesContent":["import Send from './Send';\n\nexport default Send;\n","import React from 'react';\nimport './Send.css';\n\nconst Send = ({ value, onChange, onSend }) => (\n  <form onSubmit={onSend} className=\"send-block\">\n    <input value={value} onChange={onChange} className=\"input-message\" />\n    <button className=\"send\" type=\"submit\">\n      Send\n    </button>\n  </form>\n);\n\nexport default Send;\n","import Message from './Message';\n\nexport default Message;\n","import React, { Component } from 'react';\nimport './Message.css';\n\nconst Message = ({ item }) => (\n  <div className=\"container-message\">\n    <span className=\"message\">{item.user}</span>\n    <span className=\"message end\">{item.text}</span>\n  </div>\n);\n\nexport default Message;\n","import Chat from './Chat';\n\nexport default Chat;\n","import React, { Component } from 'react';\nimport './Chat.css';\nimport Send from '../Send';\nimport io from 'socket.io-client';\nimport Message from '../Message';\n\nclass Chat extends Component {\n  constructor(props) {\n    super(props);\n    this.div = React.createRef();\n    this.state = {\n      currentUser: 'Anon',\n      messages: [],\n      inputMsg: '',\n      isLogin: false,\n      users: {},\n    };\n    this.socket = null;\n  }\n\n  setListeners = () => {\n    this.socket = io('localhost:5000');\n\n    this.socket.on('connect', () => {\n      this.socket.emit('addUser', this.state.currentUser);\n    });\n\n    this.socket.on('message', data => {\n      if (this.state.isLogin) this.addMessage(data);\n    });\n\n    this.socket.on('updateUsers', data => {\n      console.log(data);\n    });\n  };\n\n  changeMessage = event => {\n    this.setState({\n      inputMsg: event.target.value,\n    });\n  };\n\n  validName = user => {\n    return user !== '' && user !== 'Anon';\n  };\n\n  inputName = () => {\n    const user = this.div.current.value;\n    if (this.validName(user)) {\n      this.setState({ currentUser: user, isLogin: true });\n      this.setListeners();\n    }\n  };\n\n  addMessage = data => {\n    this.setState(({ messages }) => ({\n      inputMsg: '',\n      messages: [...messages, { user: data.name, text: data.message }],\n    }));\n  };\n\n  sendMessage = event => {\n    event.preventDefault();\n    const { currentUser, inputMsg } = this.state;\n    if (inputMsg.trim().length) {\n      this.socket.emit('message', {\n        name: currentUser,\n        message: inputMsg,\n      });\n      this.setState({ inputMsg: '' });\n    }\n  };\n\n  render() {\n    const { messages, inputMsg, currentUser, isLogin, users } = this.state;\n\n    if (!isLogin) {\n      return (\n        <div className=\"login\">\n          <span>Welcome!</span>\n          <input ref={this.div} defaultValue={currentUser} />\n          <button onClick={this.inputName}>OK</button>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"chat\">\n        <div className=\"message-list\">\n          <div className=\"messages\">\n            {messages.map((item, key) => (\n              <Message item={item} key={key} />\n            ))}\n          </div>\n        </div>\n        <Send\n          value={inputMsg}\n          onChange={this.changeMessage}\n          onSend={this.sendMessage}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Chat;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Chat from './components/Chat/';\n\nReactDOM.render(<Chat />, document.getElementById('root'));\n"],"sourceRoot":""}